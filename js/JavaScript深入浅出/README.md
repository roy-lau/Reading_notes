## JavaScript深入浅出

1. 交互式网络
> 感觉虚拟世界
>> 不想只把万维网视为被动网页的同义词吗？
>> 我们完全了解你的心情，我们完全了解你的心情。被动的信息应该留给‘书籍’这种形式。书籍适合阅读学习，还有很多很多用途，但与 __交互式__ 一点关系都没有。如果少了JavaScript，万维网跟书没什么两样。当然，没有JavaScript，还可以提交表单，或许再利用HTML与CSS耍些唬人的花招…… 不过，这只是在无趣的网页上操纵无生命的傀儡而已。真正让网页火起来的交互性，还需要 __多一点智慧与多一点努力__

2. 存储数据
> 每项事物都有自己的位置
>> 现实生活中，我们经常把‘有个地方存储物品’这件事看的太过重要。但在JavaScript中绝非如此。你不会有个足以藏人的更衣室，也不会有可以停放三辆保时捷的车库。在JavaScript的世界里，__每项事物都有自己的位置，__ 确认众多事物有所依归，则是你的责任。我们讲的事物就是数据——包括如何 __呈现数据,存储数据__ 以及找出数据。身为JavaScript的存储专家，你将能面对满室杂乱无章的JavaScript数据，并用意志为它们贴上虚拟标签与存储编号

3. 探索客户端
> 浏览器探索
>> 有时候，Javascript __需要知道外在的世界如何运作。__ 刚开始，你的脚本或许只是网页里的代码，但最后将存活在浏览器（或称客户端）打造的世界里。 __聪明的脚本__ 通常需要多了解外在的世界，才能与 __浏览器沟通__，才能更加了解外在的世界。如果和浏览器打好关系，无论是找出屏幕尺寸还是访问浏览器的打盹按钮（snooze button），脚本能利用的工具可多呢！

4. 前有岔路，面对抉择
> __生命中需要太多抉择。__
>> 该停车或继续开，奶酪或补丁，当个污点证人或俯首认罪…… 没有下决定的能力，就无法完成任何工作。JavaScript也有相同的状况 —— __决策（decision）让脚本在不同结果间作决定。 做决定，为你的脚本带来“故事”，__ 即使是最世俗的脚本，或多或少都牵涉到故事。我是否信任用户输入的内容，并为她预定一趟寻找萨斯考奇大脚生物的神秘之旅？还是应该检查一下，或许她预定前往加拿大萨斯彻温省的巴士？决定权在你。

5. 循环
> __自我修复的风险__
>> __有些人说,一点重复是生活中的香料。__ 没错，尝试新鲜有趣的事物确实很刺激，但一点点重复真的有可能完成一天的工作。强迫性地消毒双手，让人神经紧张的滴答声，每次收到邮件就按下“全部回复” ……好吧，或许现实生活里的重复不见得是好事。但是JavaScript的世界里，“一点重复” 可能非常便利。我们需要脚本 __重复运行代码__ 的程度很让人惊讶，循环功能因而闪闪发光。没有 __循环__, 你将浪费许多时间用于copy代码。

6. 函数
> 简化，重复利用，回收再利用
>> __如果JavaScript里有整体环境移动的状况，将由函数领头。__ 函数能让你把JavaScript代码变得更有效率，而且更能重复使用。函数是面向任务的，试用于组织代码，也是极佳的问题解决方案。听起来函数的履历表不错嘛！ 事实上，只有最简单的脚本才能与函数重组代码优势无关。虽然很难计算每个函数的二氧化碳排放量，但他们总能尽量帮助脚本更环保一点。

7. 表单与验证
> 让用户全盘托出
>> __有了JavaScript，你不用风度翩翩或者鬼鬼祟祟，一样能成功获取用户的信息。__ 但你必须千万小心。人类很容易犯错，也就是说，在线表单的数据不见得全部 __准确__ 或合格。JavaScript能帮上一点忙。把输入的 __数据传给JavaScript代码，可让网络应用程序更可靠，也能为服务期减少一些负担。珍贵的带宽应让给重要的事物，__ 例如精彩的影片或可爱的宠物的照片。

8. 驾驭网页
> __利用DOM分割HTML__
>> __利用JavaScript控制网页内容其实很像烹饪。__ 只是不用收拾残羹剩肴，但也没办法享受美味的成果。不过，你将能 __完整访问__ 网页内的HTML构成要素；更重要的是，你将拥有 __替换__ 网页成分的能力。 JavaScript让你可以 __随心所欲地控制网页内的HTML代码,__ 从而打开各种有趣的机会之门，一切都是因为 __标准对象：DOM(Document Object Model)__ 的存在。

9. 为数据带来生命
> __科学对象怪人__
>> __JavaScript对象不见得总像医生说的一样阴森可怕。__ 但他们拼凑起JavaScript语言的林林总总，所以他们团结在一起的力量比较大。  __对象结合数据与行为,__ 以创建一种新的 __数据类型，__ 比起我们到目前为止见过的其他数据过呢个”活灵活现“。你将拿到 __可以自行排序的数组，可以自我搜索的字符串,__ 还有会长毛，会在满月是咆哮的脚本！最后一项是瞎说的，不过你了解我的意思的……

10. 创建自定义对象
> __自定义对象让你为所欲为__
>> __如果有这么简单，当然谁都想做。__ JavaScript没有退货保证，但你绝对可以让它照你的意思行动。自定义对象，就像JavaScript版的极热去奶泡不加鲜奶油要三份低咖啡因浓缩咖啡的大杯摩卡玛奇朵…… 好一杯特调咖啡啊！ 有了自定义JavaScript对象，你也能煮出任你操作又利用了特性和方法优势的代码。最后甚至能制造出可重复使用的面向对象程序代码，即扩展了JavaScript语言的效率……而且又只为你服务！

11. 除错务尽
> __好脚本也会出错__
>> __即使最佳规划的JavaScript蓝图也可能出错。__ 当这种情形发生，事实上一定会发生，你的工作就是——别惊慌。最好的JavaScript开发人员，不是从未造成程序出错的人 ———— 这种人叫骗子。最好的JavaScript开发人员，是能够 __成功猎捕并消灭__ 自己制造的 __缺陷（bug）的人。还有，一流的JavaScript缺陷终结者 也会发展出良好的编程习惯，__ 使最狡诈，最棘手的缺陷的出现率降到最低。__小心使得万年船。__ 但缺陷如果登舰了，你将需要握紧自动机枪，准备战斗……

12. 动态数据
> __贴心易感的网络应用程序__
>> __当代万维网是个非常有反应的世界, 网页被期待着响应读者的每声呻吟，__ 至少许多网站用户和开发者都有这个梦想。透过一个称为Ajax————提供戏剧性地改变网页"感觉" 机制的编程技术，JavaScript在这个梦想中扮演了重要的角色。有了Ajax，网页的行为比较像完全成熟的应用程序，因为它们能够 __动态地快速下载并存储数据以及实时响应用户，__ 却不用重新载入网页或者利用浏览器的小手段。

### 1、 交互式网络

> HTML CSS JavaScript

JavaScript与HTML、CSS同为构成网页的三大元素。HTML像车身骨架，CSS是美化门面的烤漆，JavaScript则像轮胎，遵循结构（structure，HTML）、样式（style，CSS）、行动（action，JavaScript）的路径，他们同心协力把交互性推上路，JavaScript代码与CSS相似，可以直接放到网页中。

[Example1.iRock网页](./Example/iRock.html)

### 2、 存储数据

__现实生活中，我们经常把“有个地方储存物品” 这件事情看到太过重要。__ 但在JavaScript中绝非如此。你不会有个足以藏人的更衣室，也不会有可以停放三辆保时捷的车库。在JavaScript的世界里，__每项事物都有自己的位置__, 确认众多事物有所依归，则是你的责任。我们讲的事物就是数据——包括如何 __呈现数据__、 __存储数据__ 以及 __找出数据。__ 身为JavaScript的存储专家，你将能面对满室杂乱无章的JavaScript数据，并用意志为它们贴上虚拟标签与储藏编号。

> 数据类型

__Number__ 数字(number)用于存储重量、物品数量等数值数据。JavaScript的数字可能是整数(2公斤)或者浮点数(2.5公斤)。

__Boolean__ 布尔(Boolean)只有两种可能——__成立__(true)或者 __不成立__(false)。 所以，你能用布尔值表达两种可能设定的状况，例如可能设定的状况，例如只能转到“开”或“关”的烤面包机。布尔随时随地都出现在我们身边，可以协助我们做决定。

__Text__ 文本(text)数据只是一串字符，例如你最爱的咖啡品牌名称。文本通常是单一词汇或略长的句子，但不必然如此。

__字符串__ (string)也通常用于文本类型的数据，在JavaScript里，文本数据常出现在双引号`("")`或者单引号`('')`中。


> 变量命名

  变量、常量及其他JavaScript语法元素在脚本里均靠独一无二的名称分辨，这种名称也叫标识符(identifier)，JavaScript的标识符就像我们每个人都拥有的姓名，但比姓名缺乏灵活性(我们可以和别人同名同姓，但JavaScript的变量不能有这种情形)，除了脚本中的唯一性(unique),标识符尚需承受几项JavaScript发布的命名法则：

  * 标识符至少有一个字符长度
  * 标识符的第一个字符需为字母(letter)、下划线`_`或美元符号`$`
  * 第一个字符后可以接字母、下划线`_`、美元符`$`或数字(number)
  * 空格与特殊字符(下划线和美元符号除外)不可出现在标识符里。
_标识符应具有描述性，才能轻易辨识数据，更别提还有合法性需要考虑……_

### 3、 探索客户端

__有时候，JavaScript需要你知道外在的真实世界如何运作。__ 刚开始，你的脚本或许只是网页里的代码，但最后终将活在浏览器(或称客户端)打造的世界里。 __聪明的脚本__ 通常需要多了了解外在的世界，才能与 __浏览器沟通__, 才能更加了解外在世界。如果和浏览器打好关系，无论是找出屏幕尺寸还是访问浏览器的打盹按钮(snooze buttom), 脚本能利用的工具很多。

> 客户端，服务器端，JavaScript的关系

当你点击超连接或在浏览器输入一段URL，浏览器都会向某个网站服务器请求网页。直到浏览器呈现网页的前一刻，JavaScript代码才加入动作行列，负责与浏览器合作响应 __用户的交互__,并于需要时调整网页画面。浏览器里运行JavaScript代码的部分称为 __JavaScript解释器。__


> cookie 延长脚本的生命周期

我们遇到无法储存用户名的问题，有个专有名词： __持久性(persistrnce)__,或者该说是“缺乏持久性”。有时候，我们真的需要不会消失的数据。但JavaScript变量的生命却如昙花一现，于浏览器关闭或网页更新的弹指间消失无踪。浏览器的 cookie提供了持久地储存数据，让数据比脚本生命周期更长的方式。


__cookie__ 是浏览器储存在用户计算机里的一块数据。 cookie 很类似于 JavaScript 变量， 只不过在你关闭浏览器的电源、整修房屋后， cookie 依然呆在你的计算机里。所以, cookie 成了存储 iRock用户名称的便利选择。

`navigator.cookieEnabled` 检查当前浏览器是否支持cookie

```js

/**
 * 写入 cookie
 * @param  {String} name  cookie名/键
 * @param  {Object} value 值
 * @param  {Date} 	days  过期时间（天）
 * @return {type]}       description
 */
function writeCooke(name, value, days){
	var expires = "";

	if(days){
		var date = new Date();
		// 计算过期时间，需要把天数换算为毫秒数，再把毫秒数加到当前时间上
		date.setTime(date.getTtime() + (days * 24 * 60 * 60 * 1000));
		expires = '' ;
		expires = '' + date.toGMTString();
	}

	document.cookie = name + "=" + value + expires + '';
}

/**
 * 读取 cookie
 * @param  {String} name cookie名/键
 * @return {Object}      cookie值
 */
function readCookie(name){
	var searchName = name + "=";
	var cookies = document.cookie.split(';');
	for(var i = 0; i < cookies.length; i++){
		var c = cookies[i];
		while (c.charAt(0) == ' ')
			c = c.substring(1, c.length);
		if (c.indexOf(searchName) == 0)
		return c.substring(searchName.length, c.length);
	}
	return null;
}

/**
 * 清除 cookie
 * @param  {String} name cookie名/键
 * @return {[type]}      [description]
 */
function eraseCookie(name){
	writeCookie(name, "", -1);
}
```

### 4、 决策

> 前有叉路，面对抉择

__生命中需要太多抉择。__ 该停车或者继续开、奶酪或布丁、当个污点证人或俯首认罪…… 没有下决定的能力，就无法完成任何工作。JavaScript也有相同的状况—— __决策（decision）让脚本在不同结果间作决定。作决定，为你都脚本带来“故事”，__ 即使是最世俗的脚本，或多或少都牵涉到故事。我是否信任用户输入的内容，并为她预定一趟寻找 [萨斯考奇大脚生物](https://en.wikipedia.org/w/index.php?search=%E8%90%A8%E6%96%AF%E8%80%83%E5%A5%87%E5%A4%A7%E8%84%9A%E7%94%9F%E7%89%A9&title=Special:Search&profile=default&fulltext=1&searchToken=2ujhkmrh547yhsuodacb9k17y) 的神秘之旅？还是应该再检查一下，或许她想预订前往加拿大 [萨斯喀彻温省](https://baike.baidu.com/item/%E8%90%A8%E6%96%AF%E5%96%80%E5%BD%BB%E6%B8%A9%E7%9C%81/9841760?fr=aladdin) 的巴士？决定权在你

- if/else

__if 语句是有条件地运行一段代码的绝佳方式。__

`JavaScript`其实已经引入处理信息与决策的需求，其中一种对应方式即为`if`语句。`if`语句能根据评估结果为`true/false`,做出决定，而有条件地运行`JavaScript`代码。

__如果选择不只一个__ 使用`if`语句从多中行动中选择，就变成`if/else`语句，可于`true/false`条件测试失败时，运行另一段代码。也等于指示：如果(if)测试为`true`,则运行第一段程序代码，否则(else)运行另一段程序代码。

- switch/case

JavaScript 有个多重选项专用的决策语句。`if/else`适合在 __两样事物__ 间二选一，而`switch/case`语句则让我们能在 __许多事物__ 间有效率地多选一。

创建`switch/case`语句的确比创建`if/else`语句需要更多工作，但在处理两个以上的结果时，前者比较有效率。

- 作用域与上下文

在`JavaScript`里，作用域(scope)代表 __数据的上下文(context of data),__ 例如数据生存的地点以及访问数据的方式。根据作用域的不同，有些数据能被脚本的其他部分看到，但有些数据则只限某块代码使用，例如某个函数。

### 5、 循环

> 自我修复的风险

__有些人说，一点重复是生活中的香料。__ 没错，尝试新鲜有趣的事物确实很刺激，但一点点重复真的有可能完成一天的工作。强迫性地消毒双手、让人神经紧张的滴答声、每次收到邮件就按下"全部回复"……好吧，或许现实生活中的重复不见得都是好事。但在`JavaScript`的世界里，“一点重复”可能非常便利。我们需要脚本 __重复运行代码__ 的程度很让人惊讶，循环功能因而闪闪发光。没有 __循环__ ,你将需要更多的时间用于复制粘贴代码。

JavaScript 的重复机制为 __循环(loop)__,这个机制让我们重复代码。尤其以 for 循环特别适合重复动作的一直次数。

for 循环由4个部分组成：

 **1.初始化(initialization):** 初始化只于for循环起始时发生一次。

 **2.测试条件(test condition):** 测试条件检查循环是否要再继续跑一轮

 **3.动作(action):** 循环里的动作就是每一轮循环实际重复的代码

 **4.更新(update):** 循环里的更新负责于每一轮结尾更新任何循环变量

> 数据数组

JavaScript 有一种特殊的数据，__数组(array)__, 可用于存储多块数据于一个变量中。数组只有一个名称，这点与一般变量类似——但数组有多个储存位置，他就像你家的储物柜，明明只是一件家具，但有很多格储存空间。

数组里的每个元素，都由两块信息组成：**值(value)** 与具有唯一性的**键(key)**, 需以**键**访问**值**。键通常只是从0开始计算、逐次加1的连续编号。数字编号又称为**索引(index)**, 构成**索引数组(index array)**

__数组值与键一起存储__ 不论是否为对象，创建数组后，即可增加数据给数组，并从中访问数据。取得数组存储数据的关键，就是……**键！** 独一无二、与特定数据相关联的键，用于访问数据。若是索引数组，只需要使用访问数组元素的索引。

__数据于单一场所存储多段数据__

**break:** 当循环遇到break语句，它立刻结束，完全无视条件句。所以，break 语句提供了立刻跳出循环、没有多余疑问的便利方式。

**continue:** continue与break的关系很密切，它会摆脱当前这一轮循环，但不会完全离开循环。换句话说，你可以使用continue，强迫循环跳入下一轮。

> boolean运算符

**AND（a&&b）:** 如果 `a AND b` 值为`true`，运算结果为`true`，否则为`false`。

**OR（a||b）:** 如果 `a OR b` 为 `true`，运算结果为`true`，否则，为`flase`。

**NOT（！a）：**如果 `a` 为 `true`，运算结果为 `false`，如果 `a` 为 `false` ，则结果为 `true`。

_结合boolean逻辑运算符，可达成复杂的决策_

> while 循环

**`while` 循环能重复代码，直到特定条件句为 `true`**

**测试条件（Test codtion）：** 测试条件检查循环是否应该继续循环。

**行动（Action）：** 循环的行动部分则是每一轮循环里实际重复的部分。

> 二维数组

创建二维数组与创建一维数组很类似，只是数组元素换成多个子数组。这类数组形成第二维，制造出具有行与列的**数据表（table）**。


### 6、函数

> 简化、重复利用，回收再利用

>> 如果JavaScript里有整体环境移动的状况，将由函数领头。函数能让你把JavaScript代码变得更有效率，而且更能重复使用。函数是面向任务的，适用于组织代码，也是极佳的问题解决方案。听起来函数的履历表不错，事实上，只有最简单的脚本才与函数重组代码的优势无关。虽然很计算每个函数的二氧化碳排放量，但它们总能尽量帮助脚本更环保一点。


> 传递信息给函数

数据透过函数的 ***自变量***(argument,很像输入数据) 传入JavaScript函数。再查看函数语法，你看到函数创建时，自变量放在括号中的方式。传给函数的自变量数量并无实际限制，不过尽量把自变量数量维持在两三个以下还是比较合理的，自变量可以传入任何数据给函数，例如：常量(Math，PI)、变量(temp)或字面量。

> 从函数返回数据

从函数返回信息牵涉到关键字`return`的使用，关键字后接欲返回的信息。然后这些数据即被返回给调用函数的代码。
`return` 语句能房子函数的任何地方，只要记得，函数遇到`return`后将立刻结束。所以，`return`不只返回数据，同时也负责**结束函数**。

> 功能与内容分离

***内容：***  内容就是网页上的HTML代码，他提供网页实际如何拼接在一起的结构，同时也是网页数据的家。
***外观：***  外观就是网页上的CSS代码，他妆点内容的外表，决定字体，色彩，甚至可决定排版结果。
***功能：***  功能就是驱动网页、带来交互性的 JavaScript代码，可以想象这部分是**负责工作**的网页。

> 函数的两极性（callback，回调函数）

函数引用于一种特殊都函数调用方式紧密相连，这种调用方式与内容和功能的分离大有关联。不过脚本调用函数的方式不只这一种。另一种方式称为**回调函数(callback function)**，就算没有直接操作，也能调用函数。

### 7、 表单与验证

> 让用户全盘托出